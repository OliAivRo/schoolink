<!-- add_grade_teacher.html.erb -->

<div class="container my-5">
  <div class="row justify-content-center">
    <!-- Colonne pour les champs du formulaire -->
    <div class="col-md-6">
      <div class="add-grades-header mb-4">
        <h2>Exam rating</h2>
      </div>

      <%= form_with model: @section, url: create_grades_section_path(@section),
      method: :post, local: true, html: { class: 'needs-validation', novalidate:
      '' } do |form| %>
      <div class="form-group mb-3">
        <%= form.label :course_id, 'Course', class: 'form-label' %> <%=
        form.collection_select :course_id, @section.courses, :id, :name, {}, {
        class: 'form-select custom-font' } %>
      </div>

      <div class="form-group mb-3">
        <%= form.label :exam_name, 'Exam name', class: 'form-label' %> <%=
        form.text_field :exam_name, id: :exam_name, name: :exam_name, class:
        'form-control' %>
      </div>

      <div class="form-group mb-3">
        <%= form.label :date, 'Date of exam', class: 'form-label' %> <%=
        form.date_field :date, id: :date, name: :date, class: 'form-control' %>
      </div>
      <% end %>
    </div>

    <!-- Colonne pour le tableau -->
    <div class="col-md-6">
      <div class="table-responsive">
        <table
          class="table table-striped table-bordered-radius"
          id="add-grades-header"
        >
          <thead>
            <tr>
              <th class="class-name">Student name</th>
              <th class="class-grade">Grade</th>
              <th class="class-comment">Comment</th>
            </tr>
          </thead>
          <tbody>
            <% @section.students.each_with_index do |student, index| %>
            <tr>
              <td><%= student.first_name %> <%= student.last_name %></td>
              <td>
                <%= number_field_tag "grades[#{student.id}][grade]", nil, name:
                "grades[#{student.id}][grade]", class: 'form-control' %>
              </td>
              <td>
                <%= text_area_tag "grades[#{student.id}][comment]", nil, name:
                "grades[#{student.id}][comment]", class: 'form-control' %>
              </td>
            </tr>
            <% end %>
          </tbody>
        </table>
      </div>

      <!-- Boutons d'action, placÃ©s sous le tableau -->
      <div class="form-actions d-flex justify-content-end mt-3">
        <%= link_to 'Cancel', section_path(@section), class: 'btn btn-secondary
        me-2' %> <%= submit_tag 'Save', class: 'btn btn-primary me-2' %> <%=
        submit_tag 'Submit', class: 'btn btn-success' %>
      </div>
    </div>
  </div>
</div>
